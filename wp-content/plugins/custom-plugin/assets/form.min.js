(()=>{var __webpack_modules__={"./src/js/form.js":()=>{eval("document.addEventListener('DOMContentLoaded', function(e) {\n    const testimonialForm = document.getElementById('custom-testimonial-form');\n\n    testimonialForm.addEventListener('submit', (e) => {\n        e.preventDefault();\n        console.log('Prevent form to submit');\n\n        // reset the form messages\n        resetMessages();\n\n        // collect all the data\n        let data = {\n            'name': testimonialForm.querySelector('[name=\"name\"]').value,\n            'email': testimonialForm.querySelector('[name=\"email\"]').value,\n            'message': testimonialForm.querySelector('[name=\"message\"]').value,\n            'nonce': testimonialForm.querySelector('[name=\"nonce\"]').value\n        }\n\n        // validate the email\n        if (! validateEmail(data.email)) {\n            testimonialForm.querySelector('[data-error=\"invalidEmail\"]').classList.add('show');\n            return;\n        }\n\n        if (!data.name) {\n            testimonialForm.querySelector('[data-error=\"invalidName\"]').classList.add('show');\n            return;\n        }\n\n        if (!data.message) {\n            testimonialForm.querySelector('[data-error=\"invalidMessage\"]').classList.add('show');\n            return;\n        }\n\n        // ajax http post request\n        let url = testimonialForm.dataset.url;\n        let params = new URLSearchParams(new FormData(testimonialForm));\n\n        testimonialForm.querySelector('.js-form-submission').classList.add('show');\n\n        fetch(url, {\n            method: \"POST\",\n            body: params,\n        }).then(res => res.json())\n            .catch(error => {\n                resetMessages();\n                testimonialForm.querySelector('.js-form-error').classList.add('show');\n            })\n            .then(response => {\n                resetMessages();\n\n                if (response === 0 || response.status === 'error') {\n                    testimonialForm.querySelector('.js-form-error').classList.add('show');\n                    return;\n                }\n\n                testimonialForm.querySelector('.js-form-success').classList.add('show');\n                testimonialForm.reset();\n            });\n\n\n    })\n});\n\nfunction resetMessages() {\n    document.querySelectorAll('.field-msg').forEach(f => f.classList.remove('show'));\n}\n\nfunction validateEmail(email) {\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n}\n\n//# sourceURL=webpack://custom-plugin/./src/js/form.js?")}},__webpack_exports__={};__webpack_modules__["./src/js/form.js"]()})();
//# sourceMappingURL=form.min.js.map
