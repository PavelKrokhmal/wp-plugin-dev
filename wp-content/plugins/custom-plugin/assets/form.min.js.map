{"version":3,"file":"form.min.js","sources":["form.min.js"],"sourcesContent":["/*\n * ATTENTION: The \"eval\" devtool has been used (maybe by default in mode: \"development\").\n * This devtool is neither made for production nor for readable output files.\n * It uses \"eval()\" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with \"devtool: false\".\n * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/js/form.js\":\n/*!************************!*\\\n  !*** ./src/js/form.js ***!\n  \\************************/\n/***/ (() => {\n\neval(\"document.addEventListener('DOMContentLoaded', function(e) {\\n    const testimonialForm = document.getElementById('custom-testimonial-form');\\n\\n    testimonialForm.addEventListener('submit', (e) => {\\n        e.preventDefault();\\n        console.log('Prevent form to submit');\\n\\n        // reset the form messages\\n        resetMessages();\\n\\n        // collect all the data\\n        let data = {\\n            'name': testimonialForm.querySelector('[name=\\\"name\\\"]').value,\\n            'email': testimonialForm.querySelector('[name=\\\"email\\\"]').value,\\n            'message': testimonialForm.querySelector('[name=\\\"message\\\"]').value,\\n            'nonce': testimonialForm.querySelector('[name=\\\"nonce\\\"]').value\\n        }\\n\\n        // validate the email\\n        if (! validateEmail(data.email)) {\\n            testimonialForm.querySelector('[data-error=\\\"invalidEmail\\\"]').classList.add('show');\\n            return;\\n        }\\n\\n        if (!data.name) {\\n            testimonialForm.querySelector('[data-error=\\\"invalidName\\\"]').classList.add('show');\\n            return;\\n        }\\n\\n        if (!data.message) {\\n            testimonialForm.querySelector('[data-error=\\\"invalidMessage\\\"]').classList.add('show');\\n            return;\\n        }\\n\\n        // ajax http post request\\n        let url = testimonialForm.dataset.url;\\n        let params = new URLSearchParams(new FormData(testimonialForm));\\n\\n        testimonialForm.querySelector('.js-form-submission').classList.add('show');\\n\\n        fetch(url, {\\n            method: \\\"POST\\\",\\n            body: params,\\n        }).then(res => res.json())\\n            .catch(error => {\\n                resetMessages();\\n                testimonialForm.querySelector('.js-form-error').classList.add('show');\\n            })\\n            .then(response => {\\n                resetMessages();\\n\\n                if (response === 0 || response.status === 'error') {\\n                    testimonialForm.querySelector('.js-form-error').classList.add('show');\\n                    return;\\n                }\\n\\n                testimonialForm.querySelector('.js-form-success').classList.add('show');\\n                testimonialForm.reset();\\n            });\\n\\n\\n    })\\n});\\n\\nfunction resetMessages() {\\n    document.querySelectorAll('.field-msg').forEach(f => f.classList.remove('show'));\\n}\\n\\nfunction validateEmail(email) {\\n    let re = /^(([^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+(\\\\.[^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+)*)|(\\\".+\\\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\])|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$/;\\n    return re.test(String(email).toLowerCase());\\n}\\n\\n//# sourceURL=webpack://custom-plugin/./src/js/form.js?\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module can't be inlined because the eval devtool is used.\n/******/ \tvar __webpack_exports__ = {};\n/******/ \t__webpack_modules__[\"./src/js/form.js\"]();\n/******/ \t\n/******/ })()\n;"],"names":["__webpack_modules__","./src/js/form.js","eval","__webpack_exports__"],"mappings":"CAQS,KACC,IAAIA,oBAAsB,CAE9BC,mBAIA,KAENC,KAAK,6oFAUSC,oBAAsB,GAC1BH,oBAAoB,uBApBrB"}